{"@id": "https://w3id.org/tc/capsule/ci.container_hardening_v1", "@type": "Capsule", "identifier": "ci.container_hardening_v1", "title": "Container Hardening — Non-Root + No-Cache + Version Pins", "statement": "The Dockerfile must:\n  1) drop privileges with a non-root USER,\n  2) avoid build-time caches for package managers (e.g., pip --no-cache-dir or apt lists cleanup),\n  3) pin versions for installed packages (e.g., pip ==, apt package=version).", "domain": "ci", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/ci.container_hardening_v1#w/dockerfile_has_nonroot_nocache_pins", "language": "python", "codeHash": "4c9e358f85aa6f5f10caa2f6f537485bbf2be47c68c5aebc911d966dcdf6e06c", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/ci.license_compliance_v1", "@type": "Capsule", "identifier": "ci.license_compliance_v1", "title": "License Compliance — Allowlist Only", "statement": "All package licenses in the SBOM must be on an allowlist. Fail on any package with a disallowed or unknown license.", "domain": "ci", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/ci.license_compliance_v1#w/spdx_allowlist_only", "language": "python", "codeHash": "833c5e19ed30911aca8df22e9012e8ecb43c67eefc1dd6ddf8eab5665a99e675", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/ci.reproducible_artifact_hash_v1", "@type": "Capsule", "identifier": "ci.reproducible_artifact_hash_v1", "title": "Reproducible Build — Repeatable Artifact Hash", "statement": "Running the build command twice in a clean workspace should produce byte-identical artifacts (same SHA-256).", "domain": "ci", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/ci.reproducible_artifact_hash_v1#w/repeatable_hash_check", "language": "python", "codeHash": "a32130753218666ae37128fd46243fd9e731a6a0719ecc297fa132abac364d1c", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/ci.sbom_present_v1", "@type": "Capsule", "identifier": "ci.sbom_present_v1", "title": "SBOM Present for the Release", "statement": "A Software Bill of Materials (SBOM) must be attached to every release artifact.\nThe SBOM file must exist, be non-empty, and parse as JSON or SPDX tag-value text.", "domain": "ci", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/ci.sbom_present_v1#w/sbom_file_exists", "language": "python", "codeHash": "a68393feb693e626dad4e7b5e88ce9ccb4b21b99e001eed8df2493af76eb25ec", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/ci.secrets_in_build_env_v1", "@type": "Capsule", "identifier": "ci.secrets_in_build_env_v1", "title": "Build Environment — No Secrets in Env Dump", "statement": "The build environment dump must not contain forbidden keys. Fail if any env var key matches a forbidden prefix or exact name.", "domain": "ci", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/ci.secrets_in_build_env_v1#w/no_forbidden_env_keys", "language": "python", "codeHash": "af476cc67401afc0f222ac7553010d50ce9fae3dc6308684cb93d158c34d6357", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/dev.commit_conventions_v1", "@type": "Capsule", "identifier": "dev.commit_conventions_v1", "title": "Conventional Commits (with Examples)", "statement": "Consistent messages → better changelogs, semantic versioning, and easier reviews.\n\nTypes\n  • feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert\n\nFormat\n  • type(scope): brief imperative summary\n  • Blank line, then optional body; footer for BREAKING CHANGE or issues.\n\nExamples\n  • feat(api): add pagination to listUsers\n  • fix(auth): handle expired refresh tokens\n  • docs(readme): add quickstart docker commands\n\nDiff etiquette\n  • Keep PRs small; isolate unrelated changes; include before/after snippets when helpful.", "domain": "dev", "version": "1.0.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/dev.diff_risk_tags_v1", "@type": "Capsule", "identifier": "dev.diff_risk_tags_v1", "title": "Diff-Derived Risk Tags are Addressed in Review", "statement": "Compute risk tags from the diff and require the review to explicitly address each tag.\nTags include (non-exhaustive): security, performance, migration, breaking, dependency,\ninfrastructure, tests, docs. Review must mention each inferred tag.", "domain": "dev", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/dev.diff_risk_tags_v1#w/pr_review_covers_risks", "language": "python", "codeHash": "f383cbe5f2a2e9f202a5aab79f6ca1367911ddda570503a7974ef818d0c0fb5a", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/dev.enforce_todo_ticket_v1", "@type": "Capsule", "identifier": "dev.enforce_todo_ticket_v1", "title": "Enforce TODO/FIXME Lines Reference a Ticket", "statement": "Any newly added TODO/FIXME lines in a diff must include a valid ticket reference.\nDefault format is `(PROJ|JIRA)-[0-9]+` and can be customized with env `TICKET_REGEX`.\nScope: added lines only (unified diff), excluding headers (`+++`, `@@`, `diff --git`).\nPass criteria:\n  • If no TODO/FIXME were added ⇒ PASS.\n  • If TODO/FIXME were added ⇒ each TODO line must contain a ticket reference that matches `TICKET_REGEX`.", "domain": "dev", "version": "1.0.0", "assumption": ["Diff is a standard unified diff (e.g., `git diff`).", "Reviewers accept TODOs only when linked to tracked work.", "Ticket prefix is stable and communicated to the team."], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/dev.enforce_todo_ticket_v1#w/todo_refs_present", "language": "python", "codeHash": "0345b9abe0bf09a4ad973fa25d58f6ce3294e5a3539e8c03643f5ba6faa634f9", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/dev.prompt_safety_rules_v1", "@type": "Capsule", "identifier": "dev.prompt_safety_rules_v1", "title": "Prompt Safety Rules (No Secrets, No PHI/PII, Scratchpad Discipline)", "statement": "Guardrails for safe, reproducible dev prompting.\n\nDo\n  • Redact or mask secrets/PHI/PII before pasting (tokens, keys, emails, phone numbers).\n  • Use a scratchpad file; summarize context; paste only minimal diffs, errors, and file paths.\n  • State desired output explicitly (patch/diff, function signature, CLI snippet).\n  • Declare toolchain versions and OS when relevant (python 3.11, node 20, ubuntu 22.04).\n  • Prefer small, testable changes; include tests or commands to verify.\n\nDon’t\n  • Paste .env, private keys, customer data, or production URLs.\n  • Demand sweeping refactors; avoid touching unrelated files.\n  • Bury the lede — put the objective first; attach diagnostics after.\n\nScratchpad discipline\n  • Keep a running PLAN → VERIFY → ANSWER section.\n  • Use fenced code blocks for diffs/patches; keep commit-ready.", "domain": "dev", "version": "1.0.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/dev.review_checklist_v1", "@type": "Capsule", "identifier": "dev.review_checklist_v1", "title": "PR Review Checklist (Security, Perf, i18n, Docs, Tests)", "statement": "Minimal checklist for actionable reviews.\n\nSecurity\n  • Inputs validated; authz checked; secrets not logged; dependencies sane.\nPerformance\n  • No accidental N^2; hot paths measured; allocations/retries bounded.\ni18n & UX\n  • Text externalized; RTL and accessibility considered for UI.\nDocs & Tests\n  • README/CHANGELOG touched if behavior changes; tests added/updated; coverage stable.", "domain": "dev", "version": "1.0.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/dev.secret_scan_baseline_v1", "@type": "Capsule", "identifier": "dev.secret_scan_baseline_v1", "title": "Secret Scan Baseline (No Keys, No High-Entropy Blobs)", "statement": "Scan source tree for obvious secrets and high-entropy blobs. Skip vendor and binary paths.\nFail on suspected credentials or suspicious entropy across text files.", "domain": "dev", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/dev.secret_scan_baseline_v1#w/no_high_entropy_or_keys", "language": "python", "codeHash": "afa4665d2614a51ab6eee73efab4b896e83d4932cd15354e1eb3b5be1b75db0e", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/dev.style_guide_js_v1", "@type": "Capsule", "identifier": "dev.style_guide_js_v1", "title": "JS/TS Style Guide (Practical Defaults)", "statement": "Keep the surface consistent; let tools fight bikeshedding.\n\nFormatter & Lint\n  • Prettier; ESLint with recommended + security (eslint-plugin-security) + import/order.\n  • TypeScript strict for libraries; app code minimally typed but typed at boundaries.\n\nTesting & UI\n  • Jest/Vitest + Testing Library; prefer role-based queries; avoid brittle snapshots.\n  • Keep components pure; derive state; lift state when two consumers need it.\n\nExamples\n  • API calls have abort controllers and sane timeouts.\n  • Avoid implicit any; prefer union types to magic strings.", "domain": "dev", "version": "1.0.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/dev.style_guide_python_v1", "@type": "Capsule", "identifier": "dev.style_guide_python_v1", "title": "Python Style Guide (Practical Defaults)", "statement": "Use boring, reliable defaults to keep diffs clean and onboarding fast.\n\nFormatter & Lint\n  • Black (line-length 88), isort (profile=black), Ruff (or flake8) with error-level lint.\n  • mypy: --strict for libraries, relaxed for apps; add types for new/changed code.\n\nDocstrings & Tests\n  • Google or NumPy style docstrings; include Args/Returns/Raises.\n  • pytest for tests; AAA pattern; prefer small, focused tests.\n\nExamples\n  • Function signature changes require typing + tests.\n  • IO code uses context managers; network calls have timeouts.\n  • Use pathlib, not os.path string munging; f-strings over format().", "domain": "dev", "version": "1.0.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.affordance_matrix_template_v1", "@type": "Capsule", "identifier": "macgyver.affordance_matrix_template_v1", "title": "Affordance Matrix Template", "statement": "Tabulate assets→properties→law→role→risk to externalize options and surface safer substitutions.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Externalizing information reduces oversight."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.affordances_over_objects_v1", "@type": "Capsule", "identifier": "macgyver.affordances_over_objects_v1", "title": "Affordances Over Objects", "statement": "Prioritize material properties (conducts, insulates, reflects, absorbs, seals, flexes, burns, reacts) over brand-form labels to unlock repurposing.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Scene contains everyday materials with varied properties."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.bias_checklist_v1", "@type": "Capsule", "identifier": "macgyver.bias_checklist_v1", "title": "Bias & Mode Collapse Check", "statement": "Before finalizing, scan for confirmation bias, selection bias, overconfidence, and mode collapse.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Brief self‑audit improves reliability."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.blast_radius_humility_v1", "@type": "Capsule", "identifier": "macgyver.blast_radius_humility_v1", "title": "Blast-Radius Humility", "statement": "Prefer diversion, disablement, and exit over destructive outcomes; minimize the space of unintended effects.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Safety and ethics are paramount; bystanders matter."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.chain_design_v1", "@type": "Capsule", "identifier": "macgyver.chain_design_v1", "title": "Chain Design: Sense→Gate→Amplify→Actuate", "statement": "Build solutions as short chains with a clear trigger and amplification before actuation.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Multi‑stage steps increase control and predictability."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.deception_force_multiplier_v1", "@type": "Capsule", "identifier": "macgyver.deception_force_multiplier_v1", "title": "Deception as Force Multiplier", "statement": "Use diversions and illusions to buy time and reduce the need for force.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Solutions should avoid harm and de-escalate."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.deliberate_practice_v1", "@type": "Capsule", "identifier": "macgyver.deliberate_practice_v1", "title": "Deliberate Practice Drills", "statement": "Short, repeatable drills: 2‑minute affordance scans; law‑matching flashcards; chain sketches from household scenes.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Skill improves with frequent, safe micro‑reps."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.environment_as_component_v1", "@type": "Capsule", "identifier": "macgyver.environment_as_component_v1", "title": "Environment as a Component", "statement": "Treat gravity, sunlight, water, wind, terrain, and architecture as active parts of the design.", "domain": "macgyver", "version": "1.0.0", "assumption": ["The environment can safely contribute force, flow, or information."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.fail_safe_defaults_v1", "@type": "Capsule", "identifier": "macgyver.fail_safe_defaults_v1", "title": "Fail‑Safe Defaults", "statement": "Design so that interruptions and errors do not cause harm; plan graceful aborts.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Interruption is likely; failure must be safe."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.five_rails_v1", "@type": "Capsule", "identifier": "macgyver.five_rails_v1", "title": "The Five Rails of Action", "statement": "Operate along five rails: Sensing, Shaping, Timing, Power, Signaling. Compose minimally sufficient sets to achieve the goal.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Any solution can be decomposed across the five rails."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.functional_fixedness_avoidance_v1", "@type": "Capsule", "identifier": "macgyver.functional_fixedness_avoidance_v1", "title": "Avoid Functional Fixedness", "statement": "Intentionally re-label objects by their properties and verbs to unlock alternative roles.", "domain": "macgyver", "version": "1.0.0", "assumption": ["User practices re-framing and is open to substitution."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.inventory_thinking_v1", "@type": "Capsule", "identifier": "macgyver.inventory_thinking_v1", "title": "Inventory Thinking", "statement": "Represent the scene as {assets, properties, converters, storers, triggers, constraints}.", "domain": "macgyver", "version": "1.0.0", "assumption": ["A fast written inventory improves plan quality."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.latency_control_v1", "@type": "Capsule", "identifier": "macgyver.latency_control_v1", "title": "Latency Control", "statement": "Design predictable timing via burn, dissolve, flow, charging, cooling; prefer slow, observable delays.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Delays can be made visible and interruptible."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.legal_ethical_guardrails_v1", "@type": "Capsule", "identifier": "macgyver.legal_ethical_guardrails_v1", "title": "Legal & Ethical Guardrails", "statement": "Operate with consent, legality, and non‑maleficence; solutions are for safety, rescue, education, prototyping.", "domain": "macgyver", "version": "1.0.0", "assumption": ["User agrees to legal and ethical constraints."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.low_tech_first_v1", "@type": "Capsule", "identifier": "macgyver.low_tech_first_v1", "title": "Low-Tech First", "statement": "Prefer simple mechanisms (rope, wedge, lever, mirror) before powered or chemical routes.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Simple tools are present; powered tools are risky/unavailable."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.mvp_mechanism_bias_v1", "@type": "Capsule", "identifier": "macgyver.mvp_mechanism_bias_v1", "title": "MVP Mechanism Bias", "statement": "Prefer the smallest reversible mechanism that might work; escalate complexity only as needed.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Reversible steps reduce risk and damage."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.parallel_options_v1", "@type": "Capsule", "identifier": "macgyver.parallel_options_v1", "title": "Parallel Optioning", "statement": "Always generate three routes: Physical, Informational, Environmental.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Time allows at least brief divergent ideation."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver_problem_collapse_v1", "@type": "Capsule", "identifier": "macgyver_problem_collapse_v1", "title": "Problem Space Collapse → New Solutions", "statement": "Collapse a problem like macgyver.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Assumptions are enumerated or can be elicited with one question."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.prompt_skeleton_v1", "@type": "Capsule", "identifier": "macgyver.prompt_skeleton_v1", "title": "LLM Prompt Skeleton", "statement": "A structured prompt to force safe, legal, non‑destructive chain synthesis for a defined goal and setting.", "domain": "macgyver", "version": "1.0.0", "assumption": ["LLMs need structure and guardrails for reliable outputs."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.prompts_as_programs_v1", "@type": "Capsule", "identifier": "macgyver.prompts_as_programs_v1", "title": "Prompts as Programs", "statement": "Use structured prompts/checklists to force enumeration, comparison, and premortems.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Structure improves breadth and reduces blind spots."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.property_matching_v1", "@type": "Capsule", "identifier": "macgyver.property_matching_v1", "title": "Property-to-Law Matching", "statement": "Map constraints to physical laws (pressure, torque, optics, buoyancy, friction) and then to available properties and parts.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Basic physics are more portable than specific tools."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.rails_ledgers_hub_mapping_v1", "@type": "Capsule", "identifier": "macgyver.rails_ledgers_hub_mapping_v1", "title": "Rails/Ledgers/Hub Mapping", "statement": "Map solutions to rails (Sensing, Shaping, Timing, Power, Signaling), bundle minimal commuting rails as a ledger, schedule steps via the hub (ordered gates/delays).", "domain": "macgyver", "version": "1.0.0", "assumption": ["A shared vocabulary improves collaboration and auditability."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.reality_check_v1", "@type": "Capsule", "identifier": "macgyver.reality_check_v1", "title": "Reality Check vs Fiction", "statement": "Use TV scenarios only as metaphors for safe, legal, non‑hazard practice. Substitute benign analogues.", "domain": "macgyver", "version": "1.0.0", "assumption": ["No hazardous chemistry/electrics or bypassing of security systems."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.redundancy_chokepoints_v1", "@type": "Capsule", "identifier": "macgyver.redundancy_chokepoints_v1", "title": "Redundancy & Choke Points", "statement": "Protect your own single points of failure while removing the opponent’s options.", "domain": "macgyver", "version": "1.0.0", "assumption": ["System thinking improves robustness and containment."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.reflection_loop_v1", "@type": "Capsule", "identifier": "macgyver.reflection_loop_v1", "title": "Reflection Loop", "statement": "After action: identify the governing law, the choke point, and one substitution that would lower risk next time.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Retrospective improves future plan quality."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.sop_10min_loop_v1", "@type": "Capsule", "identifier": "macgyver.sop_10min_loop_v1", "title": "SOP: The 10‑Minute MacGyver Loop", "statement": "A 10‑step loop: clarify target, map layout, inventory properties, pick a law, sketch three chains, choose low‑risk, add timing control, premortem, micro‑test, execute & observe.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Timeboxed planning increases safety and success."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.stock_verbs_v1", "@type": "Capsule", "identifier": "macgyver.stock_verbs_v1", "title": "Stock Verbs", "statement": "Memorize a small verb lexicon: tie, wedge, knot, jam, twist, short, bridge, reflect, refract, siphon, vent, pack, wick, damp, shim, lash.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Motor skills and basic materials available."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.transduction_chains_v1", "@type": "Capsule", "identifier": "macgyver.transduction_chains_v1", "title": "Transduction Chains", "statement": "Route one energy into the effect you need: chemical→thermal→mechanical, optical→thermal, electrical→magnetic, pneumatic/hydraulic→force.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Safer energy conversions exist than direct brute force."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/macgyver.world_as_typed_graph_v1", "@type": "Capsule", "identifier": "macgyver.world_as_typed_graph_v1", "title": "World as a Typed Graph", "statement": "Model materials and energies as nodes with typed edges for conversions; plan paths with minimal risk and cost.", "domain": "macgyver", "version": "1.0.0", "assumption": ["Graph mindset helps enumerate options and constraints."], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/meta.truth_capsules_v1", "@type": "Capsule", "identifier": "meta.truth_capsules_v1", "title": "Truth Capsules — Golden Explainer (v1)", "statement": "TRUTH CAPSULES (v1): What they are, why they matter, and how to use them.\n\n— WHAT —\nTruth Capsules are small, signed YAML knowledge objects that bundle:\n  • A clear normative STATEMENT (human-readable rule, method, or explainer)\n  • PEDAGOGY (Socratic prompts + aphorisms for fast onboarding)\n  • Optional WITNESSES (executable checks that emit machine-readable JSON and GREEN/RED outcomes)\nThey are designed to be “projection-friendly”: profiles decide which fields to render (usually just `title` + `statement`), while witnesses provide proof-carrying automation for CI, codereview, or ops.\n\n— WHY (Proof-carrying knowledge) —\n  1) Reproducibility: capsules can include runnable checks; outputs are JSON with crisp GREEN/RED.\n  2) Composability: bundles group capsules into kits (e.g., CI gates, MacGyver pedagogy, Code Assistant).\n  3) Safety: witnesses run in locked-down sandboxes; provenance+signing provide audit trails.\n  4) Projection discipline: a profile creates consistent system prompts from the same source of truth.\n  5) Career/Org leverage: “show, don’t tell” — every claim can ship with a verifiable witness.\n\n— HOW (Views, Bundles, Witnesses) —\n  • Profiles (view): define which capsule fields are projected (e.g., title+statement) and output style (e.g., “fail fast on RED”).\n  • Bundles (kit): ordered lists of capsules for a task/context (e.g., ci_quality_gates_v1).\n  • Capsules: information-only (explainer/guidance) or witnessed (proof-carrying).\n    – Information-only: pedagogy-forward explainers for onboarding and conversation quality.\n    – Witnessed: executable checks (python/node/bash) with `code: |-` blocks and explicit `env` mappings.\n  • Execution model: a runner loads capsule YAML, extracts each witness, executes in a constrained environment, captures `{ok: bool, ...}` JSON, and returns exit code 0 (GREEN) or 1 (RED/error). CI treats any RED as a failing gate.\n\n— SCHEMA V1 (essentials) —\n  Required: `id`, `version`, `domain`, `statement`.\n  Recommended: `title`, `pedagogy`, `provenance`, `applies_to`, `security`.\n  Witnesses use inline code and should specify: `name`, `language`, `entrypoint`, `env` (mapping), `timeout_ms`, and `fs_mode`.\n  All human-visible guidance should live in `statement` so profiles can project a single coherent explainer.\n\n— SECURITY & OPERATIONAL NOTES —\n  • Run witnesses in containers (non-root, no network, read-only FS unless explicitly required).\n  • Use minimal `env:` allowlists; record provenance, review status, and signing metadata.\n  • Prefer deterministic fixtures for demo reliability; keep failure modes crisp and legible.\n\n— QUICKSTART (mental model) —\n  1) Choose a profile (view): e.g., conversational explainer vs CI gate reporter.\n  2) Load a bundle (kit): the ordered set of capsules for your task.\n  3) Project → the profile renders title+statement for humans; optionally execute witnesses for proofs.\n  4) Read the JSON evidence; GREEN/RED is the contract.\n\n— THIS GOLDEN EXPLAINER —\n  This capsule is the “rootmost” documentary explainer for the v1 demo. It’s informational (pedagogy-heavy) and ships with a tiny, self-contained witness that demonstrates canonicalization and hashing of “core content” (the proof-carrying ethos) without requiring any external files. Use it to sanity-test your runner and to onboard readers to the Truth Capsules approach.", "domain": "meta", "version": "1.0.0", "assumption": ["Profiles will project `statement` (and optionally `title`) to build consistent, reproducible prompts.", "Witnesses execute in a minimal sandbox with explicit env allowlists and short timeouts.", "Readers value GREEN/RED + JSON evidence over prose alone."], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/meta.truth_capsules_v1#w/canonical_digest_demo", "language": "python", "codeHash": "60f54c45971caa116377a8e7c499fa45ca2cfc6a7ad1444a9f091993fa7df05d", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/support.billing_basics_v1", "@type": "Capsule", "identifier": "support.billing_basics_v1", "title": "Billing Playbooks (SaaS)", "statement": "Canonical flows for common billing issues without exposing PII or promising credits.\n\nPlaybook: Get invoice PDF\n  1) Ask for masked account identifier (e.g., ticket or org slug).\n  2) Guide to: Settings → Billing → Invoices → \"Download PDF\".\n  3) If missing, create ticket for Billing with masked reference.\n\nPlaybook: Refund request (within policy)\n  1) Acknowledge and summarize the reason.\n  2) Link refunds policy (exact section) and timeframe.\n  3) Create Billing ticket; do not promise outcome; share reference ID.\n\nPlaybook: Plan downgrade / cancel\n  1) Confirm effective date and proration link.\n  2) Guide to: Settings → Plan → \"Change plan\".\n  3) If blocked by contract, route to Billing Supervisor.", "domain": "support", "version": "1.1.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/support.escalation_matrix_v1", "@type": "Capsule", "identifier": "support.escalation_matrix_v1", "title": "Escalation Matrix & Handoffs", "statement": "Route high-risk or restricted requests to the correct queue with a crisp customer explanation.\n\nMatrix (placeholders in braces are filled by your system):\n  +------------------------+---------------------+----------------------+---------------------------+\n  | Scenario               | Tier / Owner        | SLA                  | Customer-Facing Message   |\n  +------------------------+---------------------+----------------------+---------------------------+\n  | Outage / Sev-1         | On-call SRE         | 15m ack / hourly upd | \"We're experiencing an    |\n  |                        |                     |                      | outage. Status: {status_url}\"    |\n  | Billing dispute >$500  | Billing Specialist  | 1 business day       | \"I've opened a ticket     |\n  |                        |                     |                      | with Billing. Ref: {ticket_id}\"  |\n  | Refund exceptions      | Billing Supervisor  | 2 business days      | \"I'll escalate your refund|\n  |                        |                     |                      | request for review.\"      |\n  | Security/Privacy       | Security Team       | 1 business day       | \"Escalated to security.   |\n  |                        |                     |                      | Ref: {ticket}\"          |\n  | Data deletion (GDPR)   | Data Protection Off | 72 hours             | \"Deletion in progress.    |\n  |                        |                     |                      | Ref: {ticket}\"          |\n  +------------------------+---------------------+----------------------+---------------------------+\n\nRules:\n  • If severity ≥ Sev-2 or involves legal/privacy, escalate immediately and provide a reference ID.\n  • Never modify or promise billing credits; create a ticket and route to Billing.\n  • Provide the customer with what will happen next and a timeframe.\n  • Record all escalations with ticket references; avoid free-form DMs.\n  • Do not request or store PII; use masked references only.", "domain": "support", "version": "1.1.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/support.knowledge_view_projection_v1", "@type": "Capsule", "identifier": "support.knowledge_view_projection_v1", "title": "Knowledge View & Citation Policy", "statement": "Cite official docs with exact anchors; avoid paraphrasing policy-sensitive pages.\n\nSources policy:\n  • Prefer official docs, status pages, and signed announcements. Avoid blog posts for policy.\n\nCitation rules:\n  • Link the exact doc section and version (e.g., /docs/billing#refunds v3.1).\n  • Summarize in one sentence, then provide the link; do not copy large passages.\n  • If doc is gated, describe the path (Settings → Billing → Invoices).\n  • For outages, always include {status_url} and the last update time.\n\nLink policy:\n  • Never link to internal-only resources in public responses.\n  • If a page moves, provide both old and new paths during the transition.", "domain": "support", "version": "1.1.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/support.legal_privacy_rules_v1", "@type": "Capsule", "identifier": "support.legal_privacy_rules_v1", "title": "Legal & Privacy Rules (Public-Facing)", "statement": "Prevent PII leakage and ensure compliant disclosures.\n\nPII classes to avoid in public channels:\n  • email, phone, government_id, credit_card, street_address, ip_address\n\nStorage policy:\n  • Do not store PII in tickets or chat logs. Use masked IDs or internal references.\n\nCustomer-facing disclaimers (choose 1 as needed):\n  • \"For your security, please avoid sharing personal data (like email, phone, or payment info) here.\"\n  • \"We can continue after I’ve created a secure ticket; I’ll share a masked reference ID.\"\n  • \"I’m not able to provide legal or medical advice. I can link official resources instead.\"", "domain": "support", "version": "1.1.0", "assumption": [], "hasWitness": []}
{"@id": "https://w3id.org/tc/capsule/support.pii_redaction_smoke_v1", "@type": "Capsule", "identifier": "support.pii_redaction_smoke_v1", "title": "PII Redaction Smoke Test", "statement": "Ensure bundled examples contain no plaintext PII. This check scans example transcripts\n(default: artifacts/examples/support_agent/examples.txt) for emails, phone numbers,\ncredit card patterns, government ID keywords, street addresses, and IP addresses.", "domain": "support", "version": "1.0.0", "assumption": [], "hasWitness": [{"@id": "https://w3id.org/tc/capsule/support.pii_redaction_smoke_v1#w/no_plaintext_pii_in_examples", "language": "python", "codeHash": "c1a63606a50c97905a47c0890f8c265b88c98fd9e20a22eedb978767762da1b2", "codeRef": null}]}
{"@id": "https://w3id.org/tc/capsule/support.tone_style_guide_v1", "@type": "Capsule", "identifier": "support.tone_style_guide_v1", "title": "Tone & Style Guide (Public-Facing)", "statement": "Be empathetic, concise, specific, and action-oriented; never echo or store PII.\nRules:\n  • Lead with empathy and a one-sentence summary of the customer’s goal.\n  • Offer one actionable next step; avoid overwhelming lists.\n  • Prefer links to official docs; include exact anchor and version if relevant.\n  • Never guess order/account details; ask for the minimal non-sensitive clarifier.\n  • Use plain language; avoid internal acronyms or engineering jargon.\n  • Avoid absolute promises; reference policy and expected timeframes.", "domain": "support", "version": "1.1.0", "assumption": [], "hasWitness": []}
