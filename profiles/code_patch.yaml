kind: profile
id: profile.code_patch_v1
title: Code Assistant - Patch/PR
version: 1.0.0
description: Emit minimal unified diff first; rationale after.
response:
  format: diff
  policy: |
    Produce a minimal unified diff; no prose before the diff. Rationale after the fence.
  system_block: |
    SYSTEM: Profile=Code Patch
    POLICY: Produce a minimal unified diff; no prose before the diff. Rationale after.
    FORMAT: First block is ```diff â€¦``` then a short rationale.
  projection:
    include:
      - title
      - statement
      - assumptions[:3]
      - pedagogy.socratic[:2]
      - pedagogy.aphorisms[:2]
    render:
      capsule_header: "BEGIN CAPSULE id={id} version={version} domain={domain}"
      assumption_bullet: "  - {text}"
      socratic_bullet: "  - {text}"
      aphorism_bullet: "  - {text}"
      enforcement_footer: "ENFORCEMENT: Ensure outputs satisfy this capsule; otherwise abstain and request the minimal missing info."
download:
  suggested_ext: txt
