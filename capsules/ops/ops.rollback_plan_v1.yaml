id: ops.rollback_plan_v1
version: 1.0.0
statement: Deploy plans must include a rollback step with trigger conditions and owner.
domain: ops
witnesses:
- name: rollback_present
  language: python
  code: 'import json, os


    p = os.getenv("OPS_PLAN", "artifacts/examples/ops_plan_ok.json")


    r = json.load(open(p))


    rb = r.get("rollback", {})


    assert rb.get("steps") and rb.get("trigger") and rb.get("owner"), "Rollback incomplete"'
provenance:
  author: Truth Capsules
  license: MIT
  schema: provenance.v1
  org: Truth Capsules Demo
  source_url: https://example.com/truth-capsules
  created: '2025-11-07T03:53:50.511776Z'
  updated: '2025-11-07T03:56:05.351404Z'
  review:
    status: draft
    reviewers: []
    last_reviewed: null
  signing:
    method: ed25519
    key_id: null
    pubkey: null
    digest: b9bec3aa69fed5788d0b9ba19137ae352fa8ce057ca2119d779c9f14c2ad6047
    signature: null
applies_to:
- conversation
- code_assistant
- ci
dependencies: []
incompatible_with: []
security:
  sensitivity: low
  notes: ''
